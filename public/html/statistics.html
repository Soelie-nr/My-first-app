<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Statistiques EVE Online</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div style="width: 80%; margin: auto;">
        <canvas id="satisfactionChart"></canvas>
        <canvas id="plexChart"></canvas>
        <canvas id="experienceChart"></canvas>
    </div>

    <script>
        async function loadStats() {
            const response = await fetch('http://localhost:3019/api/stats');
            const data = await response.json();

            // Graphique de satisfaction
            new Chart(document.getElementById('satisfactionChart'), {
                type: 'bar',
                data: {
                    labels: Array.from({length: 11}, (_, i) => i),
                    datasets: [{
                        label: 'Distribution de la satisfaction',
                        data: data.satisfaction.satisfactionDistribution
                    }]
                }
            });

            // Graphique des prix PLEX
            new Chart(document.getElementById('plexChart'), {
                type: 'bar',
                data: {
                    labels: Array.from({length: 11}, (_, i) => i + 'M ISK'),
                    datasets: [{
                        label: 'Distribution des prix PLEX souhaités',
                        data: data.plex.plexDistribution
                    }]
                }
            });

            // Graphique d'expérience
            new Chart(document.getElementById('experienceChart'), {
                type: 'pie',
                data: {
                    labels: ['Oui', 'Non'],
                    datasets: [{
                        data: data.experience.map(e => e.count)
                    }]
                }
            });
        }

        loadStats();
    </script>
</body>
</html>